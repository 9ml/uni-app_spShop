(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/submitOrder"],{"1f7a":function(o,e,t){"use strict";var s=t("2266"),n=t.n(s);n.a},2266:function(o,e,t){},"28fe":function(o,e,t){"use strict";t.r(e);var s=t("9888"),n=t("9842");for(var i in n)"default"!==i&&function(o){t.d(e,o,function(){return n[o]})}(i);t("1f7a");var d,r=t("f0c5"),u=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],d);e["default"]=u.exports},"775c":function(o,e,t){"use strict";(function(o){t("1b93"),t("921b");s(t("66fd"));var e=s(t("28fe"));function s(o){return o&&o.__esModule?o:{default:o}}o(e.default)}).call(this,t("6e42")["createPage"])},9842:function(o,e,t){"use strict";t.r(e);var s=t("9dba"),n=t.n(s);for(var i in s)"default"!==i&&function(o){t.d(e,o,function(){return s[o]})}(i);e["default"]=n.a},9888:function(o,e,t){"use strict";var s,n=function(){var o=this,e=o.$createElement;o._self._c;o._isMounted||(o.e0=function(e){return o.myTools.navBack()})},i=[];t.d(e,"b",function(){return n}),t.d(e,"c",function(){return i}),t.d(e,"a",function(){return s})},"9dba":function(o,e,t){"use strict";(function(o,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"3ed9"))},i={components:{uniPopup:n},data:function(){return{userId:o.getStorageSync("userId"),userAdressInfo:"",userChoseGoodsInfo:"",goodsNums:0,totalPrice:0,buyType:"",userBz:"",noAdress:!0,haveAdress:!1,isSetAdress:!1}},onLoad:function(){this.imgUrl=this._Api.imgUrl,this.goodsId=o.getStorageSync("goodsId"),this.goodsTypeId=o.getStorageSync("goodsTypeId"),this.goodsNums=o.getStorageSync("goodsNums"),this.buyType=o.getStorageSync("buyType"),o.getStorageSync("consigneeId")?this.consigneeId=o.getStorageSync("consigneeId"):this.consigneeId="",console.log(s(this.consigneeId," at pages\\index\\submitOrder.vue:196")),this.getAdressInfo(),this.getGoodsInfos()},methods:{getAdressInfo:function(){var e=this;this._Api.getConfirmAdressInfo({userId:this.userId,consigneeId:this.consigneeId},function(t){console.log(s(t," at pages\\index\\submitOrder.vue:208")),200===t.meta.code?(e.noAdress=!1,e.haveAdress=!0,e.isSetAdress=!1,e.userAdressInfo=t.data,e.consigneeId=e.userAdressInfo.id):(e.isSetAdress=!0,o.showToast({title:t.meta.msg,icon:"none",duration:1500}))})},goGoodsInfo:function(e){this._Api.checkPtGoodsInfo({goodsId:e},function(t){if(console.log(s(t," at pages\\index\\submitOrder.vue:229")),200===t.meta.code)if(console.log(s(t.data.length," at pages\\index\\submitOrder.vue:231")),0===t.data.length)o.navigateTo({url:"./goodsInfoNormal?goodsId="+e});else{var n=[],i=[];t.data.forEach(function(o){n[n.length]=o.id,i[i.length]=o.ptSize}),o.navigateTo({url:"./goodsInfo?goodsId="+e+"&arr="+n+"&num="+i})}})},getGoodsInfos:function(){var e=this;this._Api.getConfirmGoodsInfo({id:this.goodsTypeId},function(t){console.log(s(t," at pages\\index\\submitOrder.vue:255")),200===t.meta.code?(t.data.goodsMainImg=e.imgUrl+t.data.goodsMainImg,t.data.lastPrice=t.data.goodsPrice-t.data.couponPrice,e.userChoseGoodsInfo=t.data,e.totalPrice=(t.data.goodsPrice-t.data.couponPrice)*e.goodsNums):o.showToast({title:t.meta.msg,icon:"none",duration:1500})})},goodsAdd:function(){this.goodsNums++,this.getPrice()},goodsCut:function(){this.goodsNums<=1?o.showToast({title:"最少选择一件哦",icon:"none",duration:1500}):(this.goodsNums--,this.getPrice())},getPrice:function(){this.totalPrice=(this.userChoseGoodsInfo.goodsPrice-this.userChoseGoodsInfo.couponPrice)*this.goodsNums},ChosePsStyle:function(){this.$refs.sendStyle.open()},choseSure:function(){this.$refs.sendStyle.close()},submitOrder:function(){if(this.isSetAdress)return o.showToast({title:"请先设置收货地址再提交订单哦~",icon:"none",duration:1500}),!1;var e=this.userChoseGoodsInfo.goodsPrice*this.goodsNums;this._Api.confirmOrder({userId:this.userId,consigneeId:this.consigneeId,propertyId:this.goodsTypeId,goodsAmount:this.goodsNums,orderPrice:e,couponPrice:this.userChoseGoodsInfo.couponPrice,orderAmount:this.totalPrice,promType:this.buyType,orderRemark:this.userBz},function(e){console.log(s(e," at pages\\index\\submitOrder.vue:320")),200===e.meta.code?(o.showToast({title:"提交成功",icon:"none",duration:1500}),setTimeout(function(){o.navigateTo({url:"./cashier?orderNum="+e.data})},1500)):o.showToast({title:e.meta.msg,icon:"none",duration:1500})})},choseMyAdress:function(){o.setStorageSync("choseAdressType",0),o.navigateTo({url:"../mine/myAdress"})}}};e.default=i}).call(this,t("6e42")["default"],t("0de9")["default"])}},[["775c","common/runtime","common/vendor"]]]);