(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/submitOrderShopCar"],{3468:function(o,e,t){"use strict";(function(o,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"1738"))},i={components:{uniPopup:n},data:function(){return{userAdressInfo:"",userChoseGoodsInfo:[],goodsNums:0,totalPrice:0,buyType:0,userBz:"",userId:o.getStorageSync("userId"),goodsNumsList:[],goodsTrolleyId:[],noAdress:!0,haveAdress:!1,isSetAdress:!1,allPrice:0}},onLoad:function(e){this.imgUrl=this._Api.imgUrl,this.goodsNumsList=o.getStorageSync("buyList"),o.getStorageSync("consigneeId")?this.consigneeId=o.getStorageSync("consigneeId"):this.consigneeId="",this.getAdressInfo(),this.getGoodsInfos()},methods:{getAdressInfo:function(){var e=this;this._Api.getConfirmAdressInfo({userId:this.userId,consigneeId:this.consigneeId},function(t){console.log(s(t," at pages\\index\\submitOrderShopCar.vue:208")),200===t.meta.code?(e.noAdress=!1,e.haveAdress=!0,e.isSetAdress=!1,e.userAdressInfo=t.data,e.consigneeId=e.userAdressInfo.id):(e.isSetAdress=!0,o.showToast({title:t.meta.msg,icon:"none",duration:1500}))})},getGoodsInfos:function(){var e=this;this._Api.shopCarSubmitOrderGoodsInfo({id:this.goodsNumsList},function(t){console.log(s(t," at pages\\index\\submitOrderShopCar.vue:230")),200===t.meta.code?(e.goodsNums=0,e.totalPrice=0,e.allPrice=0,t.data.forEach(function(o){o.lastPrice=e.myTools.countPrice(o.goodsPrice,o.goodsDiscount),o.totalPrice=o.goodsAmount*o.lastPrice,o.allPrice=o.goodsAmount*o.goodsPrice,e.goodsNums+=o.goodsAmount,e.totalPrice+=o.totalPrice,e.allPrice+=o.allPrice,o.goodsMainImg=e.imgUrl+o.goodsMainImg}),e.userChoseGoodsInfo=t.data):o.showToast({title:t.meta.msg,icon:"none",duration:1500})})},goGoodsInfo:function(e){this._Api.checkPtGoodsInfo({goodsId:e},function(t){if(console.log(s(t," at pages\\index\\submitOrderShopCar.vue:258")),200===t.meta.code)if(console.log(s(t.data.length," at pages\\index\\submitOrderShopCar.vue:260")),0===t.data.length)o.navigateTo({url:"./goodsInfoNormal?goodsId="+e});else{var n=[],i=[];t.data.forEach(function(o){n[n.length]=o.id,i[i.length]=o.ptSize}),o.navigateTo({url:"./goodsInfo?goodsId="+e+"&arr="+n+"&num="+i})}})},userHandleGoods:function(e,t){var n=this;t>0?(e.goodsAmount++,this._Api.shopCarAddOrCut({id:e.id,status:1},function(e){console.log(s(e," at pages\\index\\submitOrderShopCar.vue:287")),200===e.meta.code?n.getGoodsInfos():o.showToast({title:e.meta.msg,icon:"none",duration:1500})})):1===e.goodsAmount||(e.goodsAmount--,this._Api.shopCarAddOrCut({id:e.id,status:0},function(e){console.log(s(e," at pages\\index\\submitOrderShopCar.vue:305")),200===e.meta.code?n.getGoodsInfos():o.showToast({title:e.meta.msg,icon:"none",duration:1500})}))},ChosePsStyle:function(){this.$refs.sendStyle.open()},choseSure:function(){this.$refs.sendStyle.close()},submitOrder:function(){if(this.isSetAdress)return o.showToast({title:"请先设置收货地址再提交订单哦~",icon:"none",duration:1500}),!1;this._Api.shopCarSubmitOrder({userId:this.userId,id:this.goodsNumsList,consigneeId:this.consigneeId,orderPrice:this.allPrice,orderAmount:this.totalPrice,promType:"普通",orderRemark:this.userBz},function(e){console.log(s(e," at pages\\index\\submitOrderShopCar.vue:354")),200===e.meta.code?(o.showToast({title:"提交成功",icon:"none",duration:1500}),o.setStorageSync("buyType",1),setTimeout(function(){o.navigateTo({url:"./cashier?orderNum="+e.data})},1500)):o.showToast({title:e.meta.msg,icon:"none",duration:1500})})},choseMyAdress:function(){o.setStorageSync("choseAdressType",3),o.navigateTo({url:"../mine/myAdress"})}}};e.default=i}).call(this,t("6e42")["default"],t("0de9")["default"])},b5ac:function(o,e,t){"use strict";t.r(e);var s=t("c14f"),n=t("e172");for(var i in n)"default"!==i&&function(o){t.d(e,o,function(){return n[o]})}(i);t("c25a");var r=t("2877"),d=Object(r["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=d.exports},c14f:function(o,e,t){"use strict";var s=function(){var o=this,e=o.$createElement;o._self._c;o._isMounted||(o.e0=function(e){return o.myTools.navBack()})},n=[];t.d(e,"a",function(){return s}),t.d(e,"b",function(){return n})},c25a:function(o,e,t){"use strict";var s=t("c2d5"),n=t.n(s);n.a},c2d5:function(o,e,t){},e172:function(o,e,t){"use strict";t.r(e);var s=t("3468"),n=t.n(s);for(var i in s)"default"!==i&&function(o){t.d(e,o,function(){return s[o]})}(i);e["default"]=n.a},f078:function(o,e,t){"use strict";(function(o){t("80f6"),t("921b");s(t("66fd"));var e=s(t("b5ac"));function s(o){return o&&o.__esModule?o:{default:o}}o(e.default)}).call(this,t("6e42")["createPage"])}},[["f078","common/runtime","common/vendor"]]]);