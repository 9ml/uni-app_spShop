(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/goodsInfo"],{"4f5b":function(o,s,t){"use strict";t.r(s);var e=t("73a3"),i=t("9b4c");for(var n in i)"default"!==n&&function(o){t.d(s,o,function(){return i[o]})}(n);t("8e01");var a,c=t("f0c5"),d=Object(c["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],a);s["default"]=d.exports},5256:function(o,s,t){},"73a3":function(o,s,t){"use strict";var e,i=function(){var o=this,s=o.$createElement;o._self._c;o._isMounted||(o.e0=function(s){return o.myTools.navBack()},o.e1=function(s){return o.myTools.navBack()})},n=[];t.d(s,"b",function(){return i}),t.d(s,"c",function(){return n}),t.d(s,"a",function(){return e})},8333:function(o,s,t){"use strict";(function(o,e){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"3ed9"))},n={components:{uniPopup:i},data:function(){return{userId:o.getStorageSync("userId"),isShow:!1,goodsInfo:"",bannerList:[],tiledDisplay:[],fabricDisplay:[],evaluateAll:[],evaluateFirst:"",evaluateImg:[],isevaluate:!0,colorList:[],sizeList:[],current_c:0,current_s:0,choseMiniShow:"",isChoseColor:"",isChoseSize:"",goodsStock:"",buyNum:1,buyType:"",goodsTypeId:0,isShowUp:0,isCollectionIcon:"../../static/icon_sc.png",isCollectionFonts:"收藏",ptArr:[],puCurrent:0,ptingInfo:[],ctTypeId:"",ptType:"",isPTing:!1,isHaveColor:!1,isHaveSize:!1}},onLoad:function(o){var s=this,t=o.arr.split(","),e=o.num.split(",");t.forEach(function(o,i){s.ptArr.push({ptId:t[i],ptPersonNum:e[i]})}),this.imgUrl=this._Api.imgUrl,this.goodsId=o.goodsId,this.goodsDesc(),this.getPtingInfo(),this.evaluates(),this.getGoodsColor()},onBackPress:function(o){return 1===this.isShowUp&&(this.$refs.shares.close(),this.$refs.choseType.close(),this.$refs.cans.close(),this.isShowUp=0,!0)},methods:{onPageScroll:function(o){o.scrollTop>=70?this.isShow=!0:this.isShow=!1},goodsDesc:function(){var s=this;this._Api.shopDesc({goodsId:this.goodsId},function(t){console.log(e(t," at pages\\index\\goodsInfo.vue:472")),200===t.meta.code?(t.data.lastPrice=s.myTools.countPrice(t.data.goodsPrice,t.data.goodsDiscount),t.data.goodsMainImg=s.imgUrl+t.data.goodsMainImg,t.data.goodsSizes=t.data.goodsSizes.substr(1),s.goodsInfo=t.data,s.isCollection(),s.bannerList=s.myTools.imgAddUrl(t.data.goodsImg,s.imgUrl),s.tiledDisplay=s.myTools.imgAddUrl(t.data.tileShow,s.imgUrl),s.fabricDisplay=s.myTools.imgAddUrl(t.data.shellFarbic,s.imgUrl)):o.showToast({title:t.meta.msg,icon:"none",duration:1500})})},getPtingInfo:function(){var s=this;this._Api.showPtingGoods({ptGoodsTableId:this.ptArr[0].ptId},function(t){if(console.log(e(t," at pages\\index\\goodsInfo.vue:496")),200===t.meta.code)if(0===t.data.length)s.isPTing=!0;else{var i=(new Date).getTime();t.data.forEach(function(o){-1!=o.userImg.indexOf("http")||(o.userImg=s.imgUrl+o.userImg),s.myTools.timesChange(o.sustainTime-i),o.dayTimes=s.myTools.timesChange(o.sustainTime-i)[0],o.hoursTimes=s.myTools.timesChange(o.sustainTime-i)[1],o.minutesTimes=s.myTools.timesChange(o.sustainTime-i)[2],o.secondsTimes=s.myTools.timesChange(o.sustainTime-i)[3],o.timer=setInterval(function(){o.secondsTimes--,o.secondsTimes<=0&&(o.minutesTimes--,o.secondsTimes=60,o.minutesTimes<=0&&s.getPtingInfo())},1e3)}),s.ptingInfo=t.data}else o.showToast({title:t.meta.msg,icon:"none",duration:1500})})},goPTing:function(o,s){this.buyType="去拼单",this.isShowUp=1,this.ctTypeId=o,this.ptType=s,this.$refs.choseType.open()},evaluates:function(){var s=this;this._Api.evaluate({goodsId:this.goodsId},function(t){console.log(e(t.data," at pages\\index\\goodsInfo.vue:546")),200===t.meta.code?(s.evaluateAll=t.data,0!==t.data.length?(-1!=t.data[0].userImg.indexOf("http")||(t.data[0].userImg=s.imgUrl+t.data[0].userImg),s.evaluateImg=s.myTools.imgAddUrl(t.data[0].evenluationImg,s.imgUrl),s.evaluateFirst=t.data[0],s.evaluateFirst.createTime=s.myTools.formatDateTime(s.evaluateFirst.createTime,"str"),console.log(e(s.evaluateFirst," at pages\\index\\goodsInfo.vue:556"))):(s.isevaluate=!1,s.evaluateImg=[])):o.showToast({title:t.meta.msg,icon:"none",duration:1500})})},getGoodsColor:function(){var s=this;this._Api.getColors({goodsId:this.goodsId},function(t){console.log(e(t," at pages\\index\\goodsInfo.vue:575")),200===t.meta.code?(0===t.data.length||t.data.forEach(function(o){o.goodsColor&&(s.isHaveColor=!0,s.isChoseColor=t.data[0].goodsColor)}),s.colorList=t.data,s.getGoodsSize()):o.showToast({title:t.meta.msg,icon:"none",duration:1500})})},getGoodsSize:function(){var s=this;this._Api.getSizes({goodsId:this.goodsId,goodsColor:this.isChoseColor},function(t){console.log(e(t," at pages\\index\\goodsInfo.vue:603")),200===t.meta.code?(0===t.data.length||t.data.forEach(function(o){o.goodsSize&&(s.isHaveSize=!0,s.changeSize(0,t.data[0].goodsSize),s.goodsStock=t.data[0].goodsInventory)}),s.sizeList=t.data):o.showToast({title:t.meta.msg,icon:"none",duration:1500})})},buyAlone:function(){this.buyType="普通",this.isShowUp=1,this.$refs.choseType.open()},buyTeam:function(){this.buyType="拼团",this.isShowUp=1,this.$refs.choseType.open()},addMyShopCar:function(){this.buyType=2,this.isShowUp=1,this.$refs.choseType.open()},changeColor:function(o,s){this.current_c=o,this.isChoseColor=s,this.choseMiniShow=this.colorList[o].goodsImg,this.getGoodsSize()},lookAllComment:function(){o.navigateTo({url:"./allComment?goodsId="+this.goodsId})},changeSize:function(o,s){this.current_s=o,this.isChoseSize=s},cutNums:function(){this.buyNum<=1?o.showToast({title:"不能再少了哦",icon:"none",duration:1500}):this.buyNum--},addNums:function(){this.buyNum++},isCollection:function(){var o=this;this.userId&&this._Api.isCollect({userId:this.userId,goodsId:this.goodsId},function(s){console.log(e(s," at pages\\index\\goodsInfo.vue:681")),200===s.meta.code&&(o.isCollectionIcon="../../static/icon_ysc.png",o.isCollectionFonts="已收藏")})},isLogin:function(){o.showModal({title:"提示",content:"您未登录，是否去登录？",success:function(s){s.confirm?o.redirectTo({url:"../user/login"}):s.cancel}})},collection:function(){var s=this;this.userId?"已收藏"==this.isCollectionFonts?o.showModal({title:"提示",content:"是否取消收藏",success:function(t){t.confirm?s._Api.userDelCollection({userId:s.userId,goodsId:s.goodsId},function(t){console.log(e(t," at pages\\index\\goodsInfo.vue:720")),200===t.meta.code?(o.showToast({title:"取消收藏成功",icon:"none",duration:1500}),s.isCollectionIcon="../../static/icon_sc.png",s.isCollectionFonts="收藏"):o.showToast({title:t.meta.msg,icon:"none",duration:1500})}):t.cancel}}):this._Api.userCollection({userId:this.userId,goodsId:this.goodsId},function(t){console.log(e(t," at pages\\index\\goodsInfo.vue:747")),200===t.meta.code?(s.isCollectionIcon="../../static/icon_ysc.png",s.isCollectionFonts="已收藏",o.showToast({title:"收藏成功",icon:"none",duration:1500})):o.showToast({title:t.meta.msg,icon:"none",duration:1500})}):this.isLogin()},goBuy:function(){var s=this;if(this.userId){for(var t=0;t<this.sizeList.length;t++)this.sizeList[t].goodsColor==this.isChoseColor&&this.sizeList[t].goodsSize==this.isChoseSize&&(this.goodsTypeId=this.sizeList[t].id);"普通"==this.buyType?(o.setStorageSync("goodsId",this.goodsId),o.setStorageSync("goodsTypeId",this.goodsTypeId),o.setStorageSync("goodsNums",this.buyNum),o.setStorageSync("buyType",this.buyType),o.navigateTo({url:"./submitOrder"})):"拼团"==this.buyType?(this.$refs.choseType.close(),this.$refs.ptType.open()):2==this.buyType?this._Api.addShopCar({userId:this.userId,goodsId:this.goodsId,propertyId:this.goodsTypeId,goodsAmount:this.buyNum},function(t){200===t.meta.code?(s.$refs.choseType.close(),s.isShowUp=0,o.showToast({title:"加入成功,请在我的购物车查看",icon:"none",duration:1500})):(s.$refs.choseType.close(),o.showToast({title:t.meta.msg,icon:"none",duration:1500}))}):"去拼单"==this.buyType&&(o.setStorageSync("goodsId",this.goodsId),o.setStorageSync("goodsTypeId",this.goodsTypeId),o.setStorageSync("goodsNums",this.buyNum),o.setStorageSync("buyType",this.buyType),o.setStorageSync("ctTypeId",this.ctTypeId),o.setStorageSync("ptType",this.ptType),o.navigateTo({url:"./submitOrderCT"}))}else this.$refs.choseType.close(),this.isShowUp=0,this.isLogin()},chosePType:function(o){this.puCurrent=o},suerPt:function(){o.setStorageSync("goodsId",this.goodsId),o.setStorageSync("goodsTypeId",this.goodsTypeId),o.setStorageSync("goodsNums",this.buyNum),o.setStorageSync("buyType",this.buyType),o.setStorageSync("ptType",this.ptArr[this.puCurrent].ptId),o.navigateTo({url:"./submitOrderPT"})},shares:function(){this.$refs.shares.open(),this.isShowUp=1},closeShare:function(){this.$refs.shares.close(),this.isShowUp=0},cans:function(){this.$refs.cans.open(),this.isShowUp=1},closeCans:function(){this.$refs.cans.close(),this.isShowUp=0},closeCT:function(){this.$refs.choseType.close(),this.isShowUp=0},goKF:function(){this.userId?o.navigateTo({url:"/pages/mine/curstomerService"}):this.isLogin()},shareWeChat:function(){this.userId?o.share({provider:"weixin",scene:"WXSceneSession",type:0,href:"http://47.104.185.192:8080/didi/share.html?goodsId="+this.goodsInfo.id,title:"尚品商城",summary:"这件商品不错哦，快来看看吧~",imageUrl:this.bannerList[0],success:function(o){console.log(e("success:"+JSON.stringify(o)," at pages\\index\\goodsInfo.vue:896"))},fail:function(o){console.log(e("fail:"+JSON.stringify(o)," at pages\\index\\goodsInfo.vue:899"))}}):this.isLogin()},shareCircleOfFriends:function(){this.userId?o.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:"http://47.104.185.192:8080/didi/share.html?goodsId="+this.goodsInfo.id,title:"尚品商城",summary:"这件商品不错哦，快来看看吧~",imageUrl:this.bannerList[0],success:function(o){console.log(e("success:"+JSON.stringify(o)," at pages\\index\\goodsInfo.vue:918"))},fail:function(o){console.log(e("fail:"+JSON.stringify(o)," at pages\\index\\goodsInfo.vue:921"))}}):this.isLogin()}}};s.default=n}).call(this,t("6e42")["default"],t("0de9")["default"])},"8e01":function(o,s,t){"use strict";var e=t("5256"),i=t.n(e);i.a},"9b4c":function(o,s,t){"use strict";t.r(s);var e=t("8333"),i=t.n(e);for(var n in e)"default"!==n&&function(o){t.d(s,o,function(){return e[o]})}(n);s["default"]=i.a},e778:function(o,s,t){"use strict";(function(o){t("1b93"),t("921b");e(t("66fd"));var s=e(t("4f5b"));function e(o){return o&&o.__esModule?o:{default:o}}o(s.default)}).call(this,t("6e42")["createPage"])}},[["e778","common/runtime","common/vendor"]]]);